<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>How to Set Operator · Tokamak Network Documents</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="The document includes the process of registering the operator on a staking dashboard, starting with the distribution of smart contracts needed to operate the operator."/><meta name="docsearch:language" content="en"/><meta property="og:title" content="How to Set Operator · Tokamak Network Documents"/><meta property="og:type" content="website"/><meta property="og:url" content="https://onther-tech.github.io/"/><meta property="og:description" content="The document includes the process of registering the operator on a staking dashboard, starting with the distribution of smart contracts needed to operate the operator."/><meta name="twitter:card" content="summary"/><link rel="shortcut icon" href="/img/tokamak_favicon.svg"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css"/><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"></script><script src="https://unpkg.com/vanilla-back-to-top@7.1.14/dist/vanilla-back-to-top.min.js"></script><script>
        document.addEventListener('DOMContentLoaded', function() {
          addBackToTop(
            {"zIndex":100}
          )
        });
        </script><script src="/js/scrollSpy.js"></script><link rel="stylesheet" href="/css/prism.css"/><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/en"><img class="logo" src="/img/tokamak_white.png" alt="Tokamak Network Documents"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/en/learn/basic/tokamak-network" target="_self">Docs</a></li><li class="siteNavGroupActive"><a href="/docs/en/guides/getting-started/how-to-open-private-testnet-rootchain" target="_self">Getting Started</a></li><span><li><a id="languages-menu" href="#"><img class="languages-icon" src="/img/language.svg" alt="Languages icon"/>English</a><div id="languages-dropdown" class="hide"><ul id="languages-dropdown-items"><li><a href="/docs/ko/guides/getting-started/how-to-set-operator">한국어</a></li></ul></div></li><script>
        const languagesMenuItem = document.getElementById("languages-menu");
        const languagesDropDown = document.getElementById("languages-dropdown");
        languagesMenuItem.addEventListener("click", function(event) {
          event.preventDefault();

          if (languagesDropDown.className == "hide") {
            languagesDropDown.className = "visible";
          } else {
            languagesDropDown.className = "hide";
          }
        });
      </script></span></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><div class="hamburger-menu"><div class="line1"></div><div class="line2"></div><div class="line3"></div></div></div><h2><i>›</i><span>TON Staking</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Learn<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Basic</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/learn/basic/tokamak-network">Tokamak Network</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/basic/enter-and-exit">Interoperability</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/basic/transaction-fee">Convenience</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/basic/layer-2-solutions">Comparison with Other Solutions</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Advanced</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/design-rationale">Design Rationale</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/plasma-evm-architecture">Plasma EVM Architecture</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/root-chain">RootChain</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/child-chain">Child Chain</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/continuous-rebase">Continuous Rebase</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/plasma-evm-smart-contracts">Plasma EVM Smart Contracts</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/advanced/examples-and-best-practices">Examples and Best Practices</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Token Economy</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/ton">TON</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/child-chain">Child Chain and Staking</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/token-supply">Token Supply and Distribution</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/powerton">PowerTON</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/tx-fee">Transaction Fee</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/challenge">Challenge</a></li><li class="navListItem"><a class="navItem" href="/docs/en/learn/economics/glossary">Parameters</a></li></ul></div></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle collapsible">Guide<span class="arrow"><svg width="24" height="24" viewBox="0 0 24 24"><path fill="#565656" d="M7.41 15.41L12 10.83l4.59 4.58L18 14l-6-6-6 6z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span></h3><ul class="hide"><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Getting Started Private Testnet</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-open-private-testnet-rootchain">Setup Rootchain</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-open-private-testnet-manually">Setup Childchain</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-open-private-testnet-puppeth">Setup with Puppeth</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Connect Public Testnet</h4><ul><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-connect-public-testnet-prepare">Requirements</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-connect-public-testnet-manually">Manually</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-connect-public-testnet-puppeth">With Puppeth</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/public-testnets">Public Testnet Information</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">TON Staking</h4><ul><li class="navListItem navListItemActive"><a class="navItem" href="/docs/en/guides/getting-started/how-to-set-operator">How to Set Operator</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/private-testnet-staking">Private Testnet Staking</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/rinkeby-testnet-staking">Rinkeby Testnet Staking</a></li><li class="navListItem"><a class="navItem" href="/docs/en/guides/getting-started/how-to-commit">How to Commit</a></li></ul></div></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              var headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                var el = event.target;
                while(el !== headings){
                  if (el.tagName === 'A') {
                    document.body.classList.remove('tocActive');
                    break;
                  } else{
                    el = el.parentNode;
                  }
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer docsContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/onther-tech/docs.tokamak.network/edit/master/docs/guides/getting-started/how-to-set-operator.md" target="_blank" rel="noreferrer noopener">Edit</a><h1 id="__docusaurus" class="postHeaderTitle">How to Set Operator</h1></header><article><div><span><p>The document includes the process of registering the operator on a staking dashboard, starting with the distribution of smart contracts needed to operate the operator.</p>
<blockquote>
<p>Because it consumes a significant amount of ETH when steaming directly, it is recommended to use the <code>delegate</code> on the Dashboard](<a href="https://staking.tokamak.network">https://staking.tokamak.network</a>) unless it is intended for special purposes.</p>
</blockquote>
<p>Contracts that need to be distributed to set up operators are <code>SubmitHandler</code>, <code>EpochHandler</code>, and <code>Layer 2</code> contracts.
The ETH required for the deployment of the corresponding contract is consumed by about 0.1 ETH on a gas price basis of 10 gwei.</p>
<h2><a class="anchor" aria-hidden="true" id="set-operator"></a><a href="#set-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Set Operator</h2>
<h3><a class="anchor" aria-hidden="true" id="ton-contract-information"></a><a href="#ton-contract-information" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>TON Contract Information</h3>
<p>'TON' token and steak manager contract addresses are as follows.</p>
<p><strong>Contract Information</strong></p>
<pre><code class="hljs">TON: 0x2be5e8c109e2197d077d13a82daead6a9b3433c5
WTON: 0xc4A11aaf6ea915Ed7Ac194161d2fC9384F15bff2 
Layer2Registry: 0x0b3E174A2170083e770D5d4Cf56774D221b7063e
DepositManager: &quot;0x56E465f654393fa48f007Ed7346105c7195CEe43&quot;
SeigManager: &quot;e0x710936500aC59e8551331871Cbad3D33d5e0D909&quot;
PowerTON: &quot;0xd86d8950A4144D8a258930F6DD5f90CCE249E1CF&quot;
</code></pre>
<p>It can be checked through [Dashboard API] (<a href="https://dashboard-api.tokamak.network/managers">https://dashboard-api.tokamak.network/managers</a>).</p>
<h3><a class="anchor" aria-hidden="true" id="소스코드-다운로드-및-패키지-설치"></a><a href="#소스코드-다운로드-및-패키지-설치" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>소스코드 다운로드 및 패키지 설치</h3>
<pre><code class="hljs css language-bash">$ git <span class="hljs-built_in">clone</span> https://github.com/Onther-Tech/plasma-evm-contracts.git
$ <span class="hljs-built_in">cd</span> plasma-evm-contracts &amp;&amp; npm install
</code></pre>
<p>Once the package has been installed, you can proceed to the next step.</p>
<p>The versions of Truffle, Node.js, and Web3.js used in the script are as follows:</p>
<pre><code class="hljs css language-bash">Truffle v5.1.42 (core: 5.1.42)
Solidity - 0.5.12 (solc-js)
Node v13.8.0
Web3.js v1.2.1
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="ethereum-mainnet-access-endpoint"></a><a href="#ethereum-mainnet-access-endpoint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Ethereum Mainnet Access Endpoint</h3>
<p>The Ethereum mainnet access endpoint is required to deploy the operator. Although there are many ways, it is easy to use node addresses provided through 'Infura'. It secures address that can be accessed through 'Infura'.</p>
<p>If you don't have an 'Infura' account, you can get a access endpoint (URL) through [<a href="http://infura.io">infura.io</a>] (<a href="https://infura.io/)">https://infura.io/)</a>) membership.</p>
<p>When joining the site is completed, click <code>CREATE NEW PROJECT</code> of <code>Dashboard</code> to create a project.</p>
<p>Next, <code>ENDPOINTS</code> address that combines <code>PROJECT ID</code> is used as below.</p>
<p><code>https://mainnet.infura.io/v3/[ProjectID]</code></p>
<p><img src="/docs/assets/guides_create-infura-node.png" alt="Infura node ID">
ex) <code>https://mainnet.infura.io/ws/v3/07b1363d79a94e30af61da848ecfa194</code></p>
<p>If you have an Ethereum node that you operate, you can use that node's access address instead of the <code>Infura</code> address.</p>
<h3><a class="anchor" aria-hidden="true" id="deploy-operator"></a><a href="#deploy-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Deploy Operator</h3>
<p>Operator deployment is carried out using truffle. If truffle is not installed, install it using npm.</p>
<pre><code class="hljs css language-bash">$ npm install -g truffle
</code></pre>
<p>Once the truffle has been installed, you can now start deploying the operator. The distribution requires the Ethereum mainnet access address mentioned above and the private key of the account to be an operator.</p>
<p>If your private key is ready, you can now start distributing it.</p>
<pre><code class="hljs css language-bash">plasam-evm-contracts $ MAINNET_PRIVATE_KEY=&lt;operator<span class="hljs-string">'s private key&gt; \        
                       MAINNET_PROVIDER_URL=https://mainnet.infura.io/v3/&lt;use-your-own-infura-project-id&gt; \
                       SET_OPERATOR=true truffle migrate --network mainnet
</span></code></pre>
<p>Contract deployment order is followed by <code>EpochHandler</code>, <code>SubmitHandler</code>, and <code>Layer 2</code>.</p>
<p>The following error may occur during the deployment of the contract.</p>
<pre><code class="hljs css language-bash">  Replacing <span class="hljs-string">'Layer2'</span>
   ------------------
   &gt; transaction <span class="hljs-built_in">hash</span>:    0x4d8f5c50b44390f817b7a29daa929c638c9a8794f8778b3c0336a31cf7c3f201

Error:  *** Deployment Failed ***

<span class="hljs-string">"Layer2"</span> received a generic error from Geth that
can be caused by hitting revert <span class="hljs-keyword">in</span> a contract constructor or running out of gas.
   * gas required exceeds allowance (6721975) or always failing transaction.
   * Try: + using the <span class="hljs-string">'--dry-run'</span> option to reproduce this failure with clearer errors.
          + verifying that your gas is adequate <span class="hljs-keyword">for</span> this deployment.
</code></pre>
<p>In this case, the contract addresses of <code>EpochHandler</code> and <code>SubmitHandler</code> are checked as shown below.</p>
<pre><code class="hljs css language-bash">  Replacing <span class="hljs-string">'EpochHandler'</span>
   ------------------------
   &gt; transaction <span class="hljs-built_in">hash</span>:    0xf04a1f976e92a60b2f10e61161b1d39c697d344b1a1c8ea0aea9c9f275ae3962
   &gt; Blocks: 1            Seconds: 17
   &gt; contract address:    0x8049Fc527c6193C533dbb5F32c0b141f3219e394
   &gt; block number:        7176803
   &gt; block timestamp:     1599808036
   &gt; account:             0xDf08F82De32B8d460adbE8D72043E3a7e25A3B39
   &gt; balance:             10.933293175498842592
   &gt; gas used:            2262572 (0x22862c)
   &gt; gas price:           5 gwei
   &gt; value sent:          0 ETH
   &gt; total cost:          0.01131286 ETH


   Replacing <span class="hljs-string">'SubmitHandler'</span>
   -------------------------
   &gt; transaction <span class="hljs-built_in">hash</span>:    0x6d60f6c4251f596c7d0bb1b9dbcf86a92c29666a7a0dcd86c286d6d4c40046c7
   &gt; Blocks: 0            Seconds: 9
   &gt; contract address:    0x2C60d0f259cA25Ac1dE8ff82480EcdBC0ac1148c
   &gt; block number:        7176804
   &gt; block timestamp:     1599808051
   &gt; account:             0xDf08F82De32B8d460adbE8D72043E3a7e25A3B39
   &gt; balance:             10.923717815498842592
   &gt; gas used:            1915072 (0x1d38c0)
   &gt; gas price:           5 gwei
   &gt; value sent:          0 ETH
   &gt; total cost:          0.00957536 ETH
</code></pre>
<p>Next, change the code of <code>migrate/3_deploy_rootchain.js</code> by referring to the code below.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">deployer, network</span>) </span>{
  <span class="hljs-comment">// skip production network</span>
  <span class="hljs-keyword">if</span> (process.env.SET_OPERATOR) {
    <span class="hljs-keyword">let</span> layer2;
    <span class="hljs-keyword">let</span> epochHandler;
    <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.parse(fs.readFileSync(<span class="hljs-string">'deployed.json'</span>).toString());
    <span class="hljs-built_in">console</span>.log(data);

    <span class="hljs-keyword">await</span> deployer.deploy(EpochHandler)
      .then(<span class="hljs-function">(<span class="hljs-params">_epochHandler</span>) =&gt;</span> { epochHandler = _epochHandler; })
      .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> deployer.deploy(
        SubmitHandler,
        epochHandler.address,
      )).then(<span class="hljs-function">(<span class="hljs-params">submitHandler</span>) =&gt;</span> deployer.deploy(
        Layer2,
        epochHandler.address,
        submitHandler.address,
        etherToken,
        development,
        NRBEpochLength,
        statesRoot,
        transactionsRoot,
        receiptsRoot))
      .then(<span class="hljs-keyword">async</span> () =&gt; { layer2 = <span class="hljs-keyword">await</span> Layer2.deployed(); })
      .then(<span class="hljs-function"><span class="hljs-params">()</span> =&gt;</span> layer2.setSeigManager(data.SeigManager))
      .catch(<span class="hljs-function"><span class="hljs-params">e</span> =&gt;</span> { <span class="hljs-keyword">throw</span> e; });

    <span class="hljs-comment">// await layer2.setSeigManager(data.SeigManager);</span>
    <span class="hljs-keyword">const</span> registry = <span class="hljs-keyword">await</span> Layer2Registry.at(data.Layer2Registry);

    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">'register and deploy...'</span>);
    <span class="hljs-keyword">await</span> registry.registerAndDeployCoinage(layer2.address, data.SeigManager);
  }
};
</code></pre>
<p>You can change the code as below.</p>
<pre><code class="hljs css language-javascript"><span class="hljs-built_in">module</span>.exports = <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">deployer, network</span>) </span>{
  <span class="hljs-comment">// skip production network</span>
  <span class="hljs-keyword">if</span> (process.env.SET_OPERATOR) {
    <span class="hljs-keyword">let</span> layer2;
    <span class="hljs-keyword">let</span> epochHandler;
    <span class="hljs-keyword">const</span> data = <span class="hljs-built_in">JSON</span>.parse(fs.readFileSync(<span class="hljs-string">'deployed.json'</span>).toString());
    <span class="hljs-built_in">console</span>.log(data);

    <span class="hljs-keyword">await</span> deployer.deploy(
        Layer2,
        &lt;epochHandler.address&gt; <span class="hljs-comment">// 배포된 EpochHandler의 컨트랙트 주소</span>
        <span class="xml"><span class="hljs-tag">&lt;<span class="hljs-name">submitHandler.address</span>&gt;</span> // 배포된 SubmitHandler의 컨트랙트 주소
        etherToken,
        development,
        NRBEpochLength,
        statesRoot,
        transactionsRoot,
        receiptsRoot))
      .then(async () =&gt; { layer2 = await Layer2.deployed(); })
      .then(() =&gt; layer2.setSeigManager(data.SeigManager))
      .catch(e =&gt; { throw e; });

    const registry = await Layer2Registry.at(data.Layer2Registry);

    // register root chain and deploy coinage
    console.log('register and deploy...');
    await registry.registerAndDeployCoinage(layer2.address, data.SeigManager);
  }
};
</span></code></pre>
<p>If <code>Layer2</code> contract is deployed safely, remember the contract address.</p>
<h2><a class="anchor" aria-hidden="true" id="registry-operator"></a><a href="#registry-operator" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Registry Operator</h2>
<p>The last step in registering an operator is to register with a dashboard.</p>
<p>Some parameters are required to register with the dashboard and are as follows:</p>
<pre><code class="hljs css language-bash">operator_name: operator<span class="hljs-string">'s name
chainid: chain id, It must not be duplicated
website: operator'</span>s website address
description: description about operator
layer2: deployed layer2 contract address
</code></pre>
<p>The commands for registering an operator are as follows.</p>
<pre><code class="hljs css language-bash">plasma-evm-contracts $ REGISTER=<span class="hljs-literal">true</span> chainid=&lt;operator<span class="hljs-string">'s chain id&gt; \
                       layer2=&lt;layer2-contract-address&gt; \
                       website="&lt;website address&gt;" \
                       description="&lt;description about operator&gt;" \
                       operator_name="&lt;operator'</span>s name&gt;<span class="hljs-string">" \
                       truffle migrate --network mainnet
</span></code></pre>
<p>If <code>chain id</code> is duplicated, there will be an error called <code>duplicate chain id</code>. In that case, change <code>chain id</code> and register again.</p>
</span></div></article></div><div class="docLastUpdate"><em>Last updated on 2020. 9. 11. by cd4761</em></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/en/guides/public-testnets"><span class="arrow-prev">← </span><span>Public Testnet Information</span></a><a class="docs-next button" href="/docs/en/guides/getting-started/private-testnet-staking"><span>Private Testnet Staking</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#set-operator">Set Operator</a><ul class="toc-headings"><li><a href="#ton-contract-information">TON Contract Information</a></li><li><a href="#소스코드-다운로드-및-패키지-설치">소스코드 다운로드 및 패키지 설치</a></li><li><a href="#ethereum-mainnet-access-endpoint">Ethereum Mainnet Access Endpoint</a></li><li><a href="#deploy-operator">Deploy Operator</a></li></ul></li><li><a href="#registry-operator">Registry Operator</a></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"></a><div><h5>Docs</h5><a href="/docs/en/learn/basic/tokamak-network">Learn</a><a href="/docs/en/guides/getting-started/how-to-open-private-testnet-rootchain">Guides</a></div><div><h5>Community</h5><a href="https://discord.gg/8wSpJKz">Discord</a><a href="https://t.me/tokamak_network">Telegram</a><a href="https://twitter.com/ontherinfo">Twitter</a><a href="https://www.facebook.com/OntherInc">Facebook</a></div><div><h5>More</h5><a href="http://blog.onther.io">Onther Blog</a><a href="https://github.com/onther-tech/">Onther GitHub</a></div></section><a href="https://tokamak.network" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/tokamak_white.png" alt="Tokamak Network" width="200%" height="200%"/></a><section class="copyright">Copyright © 2020 Onther Inc.</section></footer></div></body></html>